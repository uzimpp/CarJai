# =============================================================================
# CARJAI ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update the values for your environment
# =============================================================================

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
# Port number for the backend server
PORT=8080

# Application environment: development, staging, or production
# - development: Development mode with debug features
# - staging: Pre-production testing environment
# - production: Production environment (enables secure cookies, etc.)
ENVIRONMENT=development

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# PostgreSQL connection settings
# DB_HOST: Database host address (use "database" for docker-compose, "localhost" for local)
DB_HOST=database # Must match the compose file
DB_PORT=5432
DB_NAME=carjai
DB_USER=carjai_user
DB_PASSWORD=your_very_cool_db_password
DB_SSLMODE=disable

# Docker PostgreSQL configuration (for docker-compose)
# These values should match the DB_* values above
POSTGRES_DB=carjai
POSTGRES_USER=carjai_user
POSTGRES_PASSWORD=your_very_cool_db_password
# test: ["CMD-SHELL", "pg_isready -U carjai_user -d carjai"]
# Must match with -U (user) and -d (db)

# -----------------------------------------------------------------------------
# JWT AUTHENTICATION CONFIGURATION
# -----------------------------------------------------------------------------
# User JWT settings
# USER_JWT_SECRET: Secret key for signing user JWT tokens (minimum 32 characters)
#   Generate a strong random string: openssl rand -base64 32
USER_JWT_SECRET=your_user_jwt_secret_key_at_least_32_characters_long
USER_JWT_EXPIRATION_HOURS=24
USER_JWT_ISSUER=carjai-app

# Admin JWT settings
# ADMIN_JWT_SECRET: Secret key for signing admin JWT tokens (minimum 32 characters)
#   Generate a strong random string: openssl rand -base64 32
#   IMPORTANT: Use a different secret than USER_JWT_SECRET
ADMIN_JWT_SECRET=your_admin_jwt_secret_key_at_least_32_characters_long
ADMIN_JWT_EXPIRATION_HOURS=2
ADMIN_JWT_ISSUER=carjai-admin

# Password Reset JWT settings
# PASSWORD_RESET_JWT_SECRET: Secret key for password reset tokens (minimum 32 characters)
#   Generate a strong random string: openssl rand -base64 32
#   IMPORTANT: Use a different secret than USER_JWT_SECRET and ADMIN_JWT_SECRET
PASSWORD_RESET_JWT_SECRET=your_password_reset_jwt_secret_different_from_user_jwt
PASSWORD_RESET_TOKEN_EXPIRATION_MINUTES=30

# -----------------------------------------------------------------------------
# ADMIN CONFIGURATION
# -----------------------------------------------------------------------------
# Admin account credentials (created automatically on first startup)
ADMIN_USERNAME=your_admin_username
ADMIN_PASSWORD=your_secure_admin_password_here
ADMIN_NAME=Your Name

# Admin route prefix (backend)
ADMIN_ROUTE_PREFIX=/api/admin

# Frontend admin route prefix (must have NEXT_PUBLIC_ prefix for client-side access)
NEXT_PUBLIC_ADMIN_ROUTE_PREFIX=/api/admin

# IP whitelist for admin access (comma-separated)
# Running with docker usually fell into 172.18.0.0/16 or 172.19.0.0/16
# 172.16.0.0/12 covers all Docker bridge networks (172.16.0.0 to 172.31.255.255)
# Format: IP_ADDRESS/CIDR (e.g., 127.0.0.1/32, 192.168.1.0/24)
ADMIN_IP_WHITELIST=127.0.0.1/32,::1/128,192.168.0.0/16,172.16.0.0/12

# -----------------------------------------------------------------------------
# CORS CONFIGURATION
# -----------------------------------------------------------------------------
# Allowed origins for cross-origin requests (comma-separated)
# Add your frontend URLs here (e.g., http://localhost:3000, https://yourdomain.com)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# -----------------------------------------------------------------------------
# COOKIE SECURITY CONFIGURATION
# -----------------------------------------------------------------------------
# Set to true to enable Secure flag on cookies (requires HTTPS)
# If not set, defaults to true for production environment, false otherwise
# - true: Cookies only sent over HTTPS (required for production)
# - false: Cookies sent over HTTP (for development only)
COOKIE_SECURE=false

# -----------------------------------------------------------------------------
# URL CONFIGURATION
# -----------------------------------------------------------------------------
# Frontend API URL (used by frontend to call backend)
# This is exposed to the client-side, so use NEXT_PUBLIC_ prefix
NEXT_PUBLIC_API_URL=http://localhost:8080

# Backend URL (used for constructing absolute callback URLs)
BACKEND_URL=http://localhost:8080

# Frontend URL (used for password reset links and redirects)
FRONTEND_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# GOOGLE OAUTH CONFIGURATION
# -----------------------------------------------------------------------------
# REQUIRES: Google Cloud Platform account and OAuth 2.0 credentials
# 
# How to get:
# 1. Go to https://console.cloud.google.com/
# 2. Create a new project or select an existing one
# 3. Enable Google+ API (or Google Identity Services)
# 4. Go to "Credentials" → "Create Credentials" → "OAuth 2.0 Client ID"
# 5. Configure OAuth consent screen:
#    - User Type: External (for public apps) or Internal (for workspace apps)
#    - Add scopes: email, profile, openid
# 6. Create OAuth 2.0 Client ID:
#    - Application type: Web application
#    - Authorized redirect URIs: http://localhost:8080/api/auth/google/callback
#    - For production: Add your production callback URL
# 7. Copy the Client ID and Client Secret
#
# GOOGLE_CLIENT_ID: OAuth 2.0 Client ID from Google Cloud Console
GOOGLE_CLIENT_ID=your_google_client_id

# GOOGLE_CLIENT_SECRET: OAuth 2.0 Client Secret from Google Cloud Console
# IMPORTANT: Keep this secret secure, never commit to version control
GOOGLE_CLIENT_SECRET=your_google_client_secret

# GOOGLE_REDIRECT_URI: Backend callback URL for OAuth flow
# Must match one of the "Authorized redirect URIs" in Google Cloud Console
GOOGLE_REDIRECT_URI=http://localhost:8080/api/auth/google/callback

# NEXT_PUBLIC_GOOGLE_CLIENT_ID: Same as GOOGLE_CLIENT_ID (exposed to client-side)
# Used by frontend for Google Sign-In button
NEXT_PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id

# -----------------------------------------------------------------------------
# EMAIL/SMTP CONFIGURATION
# -----------------------------------------------------------------------------
# Used for password reset emails
# 
# For Gmail:
# IMPORTANT: Use Gmail App Password, not your regular password
# Steps to get Gmail App Password:
# 1. Go to https://myaccount.google.com/
# 2. Security → 2-Step Verification (enable if not already enabled)
# 3. Security → App passwords
# 4. Select "Mail" and "Other (Custom name)" → Enter "CarJai"
# 5. Copy the 16-character app password (no spaces)
#
# For other email providers:
# - Check your email provider's SMTP settings
# - Common ports: 587 (TLS), 465 (SSL), 25 (unencrypted, not recommended)

# SMTP server hostname
SMTP_HOST=smtp.gmail.com

# SMTP server port (587 for TLS, 465 for SSL)
SMTP_PORT=587

# SMTP username (your email address)
SMTP_USERNAME=your-email@gmail.com

# SMTP password (Gmail App Password or your email provider's password)
SMTP_PASSWORD=your-16-char-app-password

# Email sender address and name
SMTP_FROM=CarJai <your-email@gmail.com>

# -----------------------------------------------------------------------------
# EXTERNAL API CONFIGURATION
# -----------------------------------------------------------------------------
# AI GEN API (used for OCR - Optical Character Recognition)
# REQUIRES: AI Gen account
#
# How to get:
# 1. Visit https://developer.aigen.online/ (or the AI Gen service website)
# 2. Create an account
# 3. Navigate to API settings or Developer section
# 4. Generate an API key
# 5. Copy the API key
#
# AIGEN_API_KEY: API key from AI Gen service for OCR functionality
# Used for extracting text from car registration documents
AIGEN_API_KEY=your_aigen_api_key_here

# -----------------------------------------------------------------------------
# NODE.JS CONFIGURATION
# -----------------------------------------------------------------------------
# Node.js environment mode
# - development: Development mode with hot reload, debug features
# - production: Production mode with optimizations
NODE_ENV=development
