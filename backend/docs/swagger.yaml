openapi: 3.0.3
info:
  title: CarJai API
  description: CarJai platform API for car buying, selling, and admin management
  version: 1.0.0
  contact:
    name: CarJai Team
servers:
  - url: http://localhost:8080
    description: Development server

security:
  - CookieAuth: []

paths:
  # Health Check
  /health:
    get:
      tags:
        - Health
      summary: Basic health check
      security: []
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  status: "healthy"
                  timestamp: "2024-01-01T00:00:00Z"
                  version: "1.0.0"
                  services:
                    database:
                      status: "healthy"
                      response_time: "5ms"
                  uptime: "24h30m15s"
        '503':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 503
                data:
                  status: "unhealthy"
                  timestamp: "2024-01-01T00:00:00Z"
                  version: "1.0.0"
                  services:
                    database:
                      status: "unhealthy"
                      response_time: "5ms"
                      error: "connection failed"
                  uptime: "24h30m15s"

  # User Authentication
  /api/auth/signup:
    post:
      tags:
        - Authentication
      summary: User registration
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - email
                - password
                - name
              properties:
                username:
                  type: string
                  maxLength: 20
                  example: "user123"
                email:
                  type: string
                  format: email
                  example: "user@example.com"
                password:
                  type: string
                  minLength: 8
                  example: "secure_password"
                name:
                  type: string
                  maxLength: 100
                  example: "John Doe"
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 201
                message: "User created successfully"
        '400':
          description: Bad request - Invalid input or validation failure
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: false
                message: "Username already exists"
                code: 400

  /api/auth/signin:
    post:
      tags:
        - Authentication
      summary: User sign in
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: "user@example.com"
                password:
                  type: string
                  example: "secure_password"
      responses:
        '200':
          description: Sign in successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                message: "Sign in successful"
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: false
                message: "Invalid email or password"
                code: 401

  /api/auth/google/signin:
    post:
      tags:
        - Authentication
      summary: User sign in with Google ID token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id_token
              properties:
                id_token:
                  type: string
                  description: Google ID token from Google Identity Services
      responses:
        '200':
          description: Sign in successful
        '401':
          description: Invalid Google token

  /api/auth/google/start:
    get:
      tags:
        - Authentication
      summary: Start Google OAuth flow
      security: []
      responses:
        '302':
          description: Redirects to Google authorization page
        '500':
          description: Google OAuth not configured

  /api/auth/google/callback:
    get:
      tags:
        - Authentication
      summary: Google OAuth callback
      security: []
      parameters:
        - in: query
          name: state
          schema:
            type: string
        - in: query
          name: code
          schema:
            type: string
      responses:
        '200':
          description: Sign in successful
        '400':
          description: Invalid state or code
        '502':
          description: Failed to exchange code

  /api/auth/me:
    get:
      tags:
        - Authentication
      summary: Get current user information
      responses:
        '200':
          description: User information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  user:
                    id: 1
                    email: "user@example.com"
                    username: "user123"
                    name: "User Name"
                  roles:
                    buyer: true
                    seller: true
                  profiles:
                    buyerComplete: true
                    sellerComplete: false
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/signout:
    post:
      tags:
        - Authentication
      summary: User sign out
      responses:
        '200':
          description: Sign out successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data: null
                message: "Signed out successfully"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/refresh:
    post:
      tags:
        - Authentication
      summary: Refresh user authentication token
      responses:
        '200':
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  user:
                    id: 1
                    email: "user@example.com"
                    username: "user123"
                  token: "new_jwt_token"
                  expiresAt: "2024-12-31T23:59:59Z"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/change-password:
    post:
      tags:
        - Authentication
      summary: Change user password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - current_password
                - new_password
              properties:
                current_password:
                  type: string
                  example: "current_password"
                new_password:
                  type: string
                  minLength: 8
                  example: "new_password"
      responses:
        '200':
          description: Password changed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data: null
                message: "Password changed successfully"
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # Profile Management
  /api/profile/self:
    get:
      tags:
        - Profile
      summary: Get current user profile
      responses:
        '200':
          description: User profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    patch:
      tags:
        - Profile
      summary: Update current user profile (unified endpoint)
      description: |
        Unified endpoint for updating profile information. Supports updating:
        - Account fields (username, name)
        - Buyer profile (province, budget_min, budget_max)
        - Seller profile (display_name, about, map_link, contacts)
        
        All fields are optional. You can update any combination of these in a single request.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  minLength: 3
                  maxLength: 20
                  description: Account username
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                  description: Account display name
                buyer:
                type: object
                  description: Buyer profile data
              properties:
                province:
                  type: string
                  maxLength: 100
                    budgetMin:
                  type: integer
                  minimum: 0
                    budgetMax:
                  type: integer
                  minimum: 0
                seller:
                type: object
                  description: Seller profile data
                  required:
                    - displayName
                properties:
                    displayName:
                    type: string
                      maxLength: 50
                  about:
                    type: string
                      maxLength: 200
                    mapLink:
                    type: string
                    contacts:
                      type: array
                      items:
              type: object
              required:
                          - contactType
                          - value
              properties:
                          contactType:
                  type: string
                            maxLength: 20
                          value:
                  type: string
                          label:
                  type: string
                            maxLength: 80
            example:
              username: "newusername"
              name: "New Name"
              buyer:
                province: "Bangkok"
                budgetMin: 300000
                budgetMax: 1500000
              seller:
                displayName: "My Shop"
                about: "About my shop"
                contacts:
                  - contactType: "phone"
                    value: "0812345678"
                    label: "Mobile"
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileResponse'
        '400':
          description: Bad request (validation error or no fields provided)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/profile/seller/{id}:
    get:
      tags:
        - Profile
      summary: Get seller profile by ID (public endpoint)
      description: |
        Public endpoint that returns seller profile data including display_name, about, map_link, contacts, and lightweight car summaries.
        Useful for displaying seller info on car listing pages.
        Car summaries contain essential fields (id, status, brand, model, submodel, year, price, mileage, bodyType, transmission, drivetrain, fuelTypes, colors, conditionRating, thumbnailUrl) for optimal performance.
      security: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: Seller ID (user ID)
        - name: lang
          in: query
          required: false
          schema:
            type: string
            enum: [en, th]
            default: en
          description: Language preference for car labels
      responses:
        '200':
          description: Seller profile retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SellerResponse'
              example:
                success: true
                code: 200
                data:
                  seller:
                    id: 1
                    displayName: "My Car Shop"
                    about: "Best cars in town"
                    mapLink: "https://maps.google.com/..."
                  contacts:
                    - id: 1
                      sellerId: 1
                      contactType: "phone"
                      value: "0812345678"
                      label: "Mobile"
                    - id: 2
                      sellerId: 1
                      contactType: "email"
                      value: "contact@shop.com"
                      label: "Business Email"
                  cars:
                    - id: 1
                      sellerId: 1
                      status: "active"
                      brandName: "Toyota"
                      modelName: "Camry"
                      submodelName: "XLE"
                      year: 2020
                      price: 500000
                      mileage: 50000
                      bodyType: "Sedan"
                      transmission: "Automatic"
                      drivetrain: "FWD"
                      fuelTypes: ["Gasoline"]
                      colors: ["White", "Gray"]
                      conditionRating: 4
                      thumbnailUrl: "/api/cars/images/123"
        '404':
          description: Seller profile not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                code: 404
                message: "Seller profile not found"

  # Car Management
  /api/cars/search:
    get:
      tags:
        - Cars
      summary: Search cars with filters
      description: Search and filter cars by various criteria. All filters are optional and can be combined.
      security: []
      parameters:
        - name: q
          in: query
          description: Search query (brand, model, description)
          schema:
            type: string
          example: "Toyota"
        - name: bodyType
          in: query
          description: Body type code filter
          schema:
            type: string
            enum: [PICKUP, VAN, CITYCAR, DAILY, SUV, SPORTLUX]
          example: "SUV"
        - name: transmission
          in: query
          description: Transmission type code filter
          schema:
            type: string
            enum: [MANUAL, AT]
          example: "AT"
        - name: drivetrain
          in: query
          description: Drivetrain type code filter
          schema:
            type: string
            enum: [FWD, RWD, AWD, 4WD]
          example: "AWD"
        - name: fuelTypes
          in: query
          description: Fuel type codes filter (can specify multiple)
          schema:
            type: array
            items:
              type: string
              enum: [GASOLINE, DIESEL, ELECTRIC, HYBRID, LPG, CNG]
          style: form
          explode: true
          example: ["GASOLINE", "HYBRID"]
        - name: colors
          in: query
          description: Color codes filter (can specify multiple)
          schema:
            type: array
            items:
              type: string
          style: form
          explode: true
          example: ["WHITE", "BLACK"]
        - name: provinceId
          in: query
          description: Province ID filter
          schema:
            type: integer
          example: 10
        - name: minPrice
          in: query
          description: Minimum price (Baht)
          schema:
            type: integer
          example: 300000
        - name: maxPrice
          in: query
          description: Maximum price (Baht)
          schema:
            type: integer
          example: 1500000
        - name: minYear
          in: query
          description: Minimum year
          schema:
            type: integer
          example: 2015
        - name: maxYear
          in: query
          description: Maximum year
          schema:
            type: integer
          example: 2024
        - name: page
          in: query
          description: Page number for pagination
          schema:
            type: integer
            default: 1
          example: 1
        - name: limit
          in: query
          description: Items per page
          schema:
            type: integer
            default: 20
            maximum: 100
          example: 20
      responses:
        '200':
          description: Search results with pagination
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      cars:
                        type: array
                        items:
                          $ref: '#/components/schemas/Car'
                      total:
                        type: integer
                        description: Total number of matching cars
                        example: 30
                      page:
                        type: integer
                        description: Current page number
                        example: 1
                      limit:
                        type: integer
                        description: Items per page
                        example: 20
              example:
                success: true
                data:
                  cars:
                    - id: 1
                      sellerId: 1
                      brandName: "TOYOTA"
                      modelName: "Camry"
                      year: 2020
                      price: 850000
                      mileage: 45000
                      provinceId: 10
                      bodyTypeCode: "DAILY"
                      transmissionCode: "AT"
                      drivetrainCode: "FWD"
                      status: "active"
                  total: 30
                  page: 1
                  limit: 20

  /api/cars:
    post:
      tags:
        - Cars
      summary: Create new car
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CarCreate'
      responses:
        '201':
          description: Car created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 201
                data:
                  id: 1
                  seller_id: 1
                  brand_name: "TOYOTA"
                  model_name: "Camry"
                  status: "draft"
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/cars/my:
    get:
      tags:
        - Cars
      summary: Get current user's cars
      parameters:
        - name: lang
          in: query
          required: false
          schema:
            type: string
            enum: [en, th]
            default: en
          description: Language preference for translated labels
      responses:
        '200':
          description: User's cars
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  - id: 1
                    sellerId: 1
                    brandName: "TOYOTA"
                    modelName: "Camry"
                    bodyType: "Sedan"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/cars/{id}:
    get:
      tags:
        - Cars
      summary: Get single car
      security: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: lang
          in: query
          required: false
          schema:
            type: string
            enum: [en, th]
            default: en
          description: Language preference for translated labels
      responses:
        '200':
          description: Car details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  car:
                    id: 1
                    sellerId: 1
                    brandName: "TOYOTA"
                    modelName: "Camry"
                    year: 2020
                    price: 850000
                    bodyType: "Sedan"
                    transmission: "Automatic"
                    drivetrain: "FWD"
                  images:
                    - id: 1
                      carId: 1
                      url: "/api/cars/images/1"
                  inspection:
                    station: "Test Station"
                    overallPass: true
                  sellerContacts:
                    - id: 1
                      sellerId: 1
                      contactType: "phone"
                      value: "0812345678"
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                success: false
                code: 404
                message: "Car not found"

    put:
      tags:
        - Cars
      summary: Update car
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CarUpdate'
      responses:
        '200':
          description: Car updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  id: 1
                  seller_id: 1
                  brand_name: "TOYOTA"
                  model_name: "Camry"
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden (not owner)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - Cars
      summary: Delete car
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Car deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data: null
                message: "Car deleted successfully"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Forbidden (not owner)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/cars/{id}/images:
    post:
      tags:
        - Cars
      summary: Upload car images
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                images:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Images uploaded successfully

  /api/cars/{id}/status:
    put:
      tags:
        - Cars
      summary: Update car status
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [draft, active, sold, deleted]
      responses:
        '200':
          description: Status updated successfully

  /api/cars/{id}/book:
    post:
      tags:
        - Cars
      summary: Upload registration book to existing car
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                book_file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Book uploaded successfully

  /api/cars/{id}/images/order:
    put:
      tags:
        - Cars
      summary: Reorder car images
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                imageIds:
                  type: array
                  items:
                    type: integer
      responses:
        '200':
          description: Images reordered successfully

  /api/cars/{id}/inspection:
    post:
      tags:
        - Cars
      summary: Upload inspection results via URL
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - url
              properties:
                url:
                  type: string
                  format: uri
                  example: "https://example.com/inspection"
      responses:
        '200':
          description: Inspection uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                  message:
                    type: string
                  code:
                    type: string
                  action:
                    type: string
                    enum: [stay, redirect]
                  redirectToCarID:
                    type: integer
                    nullable: true

  /api/cars/{id}/draft:
    patch:
      tags:
        - Cars
      summary: Auto-save car draft
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CarUpdate'
      responses:
        '200':
          description: Draft saved successfully

  /api/cars/{id}/review:
    get:
      tags:
        - Cars
      summary: Review car publish readiness
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Review results
          content:
            application/json:
              schema:
                type: object
                properties:
                  ready:
                    type: boolean
                  issues:
                    type: array
                    items:
                      type: string

  /api/cars/{id}/discard:
    post:
      tags:
        - Cars
      summary: Discard car draft
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Car discarded successfully

  /api/cars/{id}/restore-progress:
    get:
      tags:
        - Cars
      summary: Get car data for restoring progress (owner only)
      description: Returns car data with images and inspection for the specified car. Only the car owner can access this endpoint.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: Car ID
        - name: lang
          in: query
          description: Language preference for labels
          schema:
            type: string
            enum: [en, th]
            default: en
      responses:
        '200':
          description: Car data retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      car:
                        $ref: '#/components/schemas/CarDisplay'
                      images:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            carId:
                              type: integer
                            imageType:
                              type: string
                            imageSize:
                              type: integer
                            displayOrder:
                              type: integer
                            uploadedAt:
                              type: string
                              format: date-time
                            url:
                              type: string
                              example: "/api/cars/images/123"
                      inspection:
                        $ref: '#/components/schemas/InspectionResult'
        '400':
          description: Bad request - Invalid car ID
        '401':
          description: Unauthorized - Authentication required
        '403':
          description: Forbidden - Only car owner can access this endpoint
        '500':
          description: Internal server error

  /api/cars/{id}/estimate:
    get:
      tags:
        - Cars
      summary: Get estimated market price for a car
      description: >
        Calculates an estimated market price for a car based on its
        brand, submodel, year, condition, mileage, and inspection results.
        Requires authentication (inherits global CookieAuth).
      operationId: getCarPriceEstimate
      parameters:
        - name: id
          in: path
          description: ID of the car (draft) to estimate
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Estimation successful or estimation unavailable
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    nullable: true
                    properties:
                      estimatedPrice:
                        type: integer
                        format: int64
                        example: 450000
                  message:
                    type: string
                    nullable: true
                    example: "estimation unavailable: market price not found for TOYOTA HILUX VIGO (2008)"
        '400':
          description: Bad request (e.g., Invalid car ID)
        '401':
          description: Unauthorized
        '404':
          description: Car not found

  /api/cars/images/{image_id}:
    get:
      tags:
        - Cars
      summary: Get car image
      security: []
      parameters:
        - name: image_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Image data
          content:
            image/*:
              schema:
                type: string
                format: binary
        '404':
          description: Image not found

    delete:
      tags:
        - Cars
      summary: Delete car image
      parameters:
        - name: image_id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Image deleted successfully
        '404':
          description: Image not found

  # Favorites
  /api/favorites/my:
    get:
      tags:
        - Favorites
      summary: Get current user's favourite listings (buyer-only)
      operationId: getMyFavourites
      x-roles:
        - buyer
      security:
        - CookieAuth: []
      description: |
        Buyer-only endpoint. Returns the authenticated buyer's favourite car listings with images.
        Sellers are not allowed to use favourites and will receive 403.
      responses:
        '200':
          description: Favourite car listings as lightweight list items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarListItemListResponse'
              examples:
                sample:
                  value:
                    success: true
                    data:
                      - id: 101
                        sellerId: 5
                        year: 2019
                        mileage: 35000
                        price: 420000
                        provinceId: 10
                        conditionRating: 4
                        bodyTypeCode: "SEDAN"
                        transmissionCode: "AT"
                        drivetrainCode: "FWD"
                        seats: 5
                        doors: 4
                        status: "active"
                        createdAt: "2024-12-01T10:00:00Z"
                        updatedAt: "2024-12-10T10:00:00Z"
                        brandName: "TOYOTA"
                        modelName: "COROLLA"
                        submodelName: "1.8E"
                        images:
                          - id: 1
                            carId: 101
                            imageType: "image/jpeg"
                            imageSize: 204800
                            displayOrder: 1
                            uploadedAt: "2024-12-01T11:00:00Z"
        '401':
          description: Unauthorized - Authentication required
        '403':
          description: Forbidden - Only buyers can access favourites

  /api/favorites/{carId}:
    post:
      tags:
        - Favorites
      summary: Add a car to favourites (buyer-only)
      operationId: addFavourite
      x-roles:
        - buyer
      security:
        - CookieAuth: []
      description: |
        Buyer-only endpoint. Adds the specified car to the authenticated buyer's favourites.
        Sellers are not allowed to use favourites and will receive 403.
      parameters:
        - name: carId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Favourite added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicResponse'
              examples:
                  success:
                        value:
                    success: true
                    message: "Car 101 added to favourites"
        '400':
          description: Bad request - Invalid car ID or car not active
        '401':
          description: Unauthorized - Authentication required
        '403':
          description: Forbidden - Only buyers can add favourites

    delete:
      tags:
        - Favorites
      summary: Remove a car from favourites (buyer-only)
      operationId: removeFavourite
      x-roles:
        - buyer
      security:
        - CookieAuth: []
      description: |
        Buyer-only endpoint. Removes the specified car from the authenticated buyer's favourites.
        Sellers are not allowed to use favourites and will receive 403.
      parameters:
        - name: carId
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Favourite removed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicResponse'
              examples:
                  success:
                  value:
                    success: true
                    message: "Car 101 removed from favourites"
        '401':
          description: Unauthorized - Authentication required
        '404':
          description: Favourite not found
        '403':
          description: Forbidden - Only buyers can remove favourites

  # Recent Views
  /api/recent-views:
    post:
      tags:
        - Recent Views
      summary: Record a car view (buyer-only)
      operationId: recordView
      x-roles:
        - buyer
      security:
        - CookieAuth: []
      description: |
        Buyer-only endpoint. Records a car view for the authenticated buyer.
        Sellers are not allowed to record views and will receive 403.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
                  required:
                - car_id
                properties:
                car_id:
                  type: integer
                  minimum: 1
                  description: ID of the car being viewed
                  example: 101
      responses:
        '200':
          description: View recorded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicResponse'
              examples:
                success:
                  value:
                    success: true
                    message: "View recorded successfully"
        '400':
          description: Bad request - Invalid car ID or car not active
        '401':
          description: Unauthorized - Authentication required
        '403':
          description: Forbidden - Only buyers can record recent views
        '500':
          description: Server error

    get:
      tags:
        - Recent Views
      summary: Get current user's recent views (buyer-only)
      operationId: getRecentViews
      x-roles:
        - buyer
      security:
        - CookieAuth: []
      description: |
        Buyer-only endpoint. Returns the authenticated buyer's recent car views as CarListItem objects.
        Sellers are not allowed to access recent views and will receive 403.
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: Maximum number of recent views to return (default: 20, max: 100)
        - name: lang
          in: query
          required: false
          schema:
            type: string
            default: "en"
          description: Language preference for translated labels (default: "en")
      responses:
        '200':
          description: Recent car views as lightweight list items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CarListItemListResponse'
              examples:
                sample:
                  value:
                success: true
                data:
                      - id: 101
                        sellerId: 5
                        year: 2019
                        mileage: 35000
                        price: 420000
                        provinceId: 10
                        conditionRating: 4
                      bodyType: "Sedan"
                      transmission: "Automatic"
                      drivetrain: "FWD"
                        status: "active"
                        brandName: "TOYOTA"
                        modelName: "COROLLA"
                        submodelName: "1.8E"
                      thumbnailUrl: "/api/cars/images/123"
        '401':
          description: Unauthorized - Authentication required
        '403':
          description: Forbidden - Only buyers can access recent views
        '500':
          description: Server error

  # Reports
  /api/reports/cars/{id}:
    post:
      tags:
        - Reports
      summary: Submit car report
      description: Submit a report about a specific car listing. Requires authentication.
      security:
        - CookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Target car ID to report
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CarReportRequest'
      responses:
        '201':
          description: Report submitted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateReportResponse'
        '400':
          description: Invalid request (e.g., missing fields, invalid topic, car not found)
        '401':
          description: Unauthorized
        '409':
          description: Duplicate report within 3 days

  /api/reports/sellers/{id}:
    post:
      tags:
        - Reports
      summary: Submit seller report
      description: Submit a report about a seller (user). Requires authentication.
      security:
        - CookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Target seller ID to report
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SellerReportRequest'
      responses:
        '201':
          description: Report submitted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateReportResponse'
        '400':
          description: Invalid request (e.g., missing fields, invalid topic, self-report, seller not found)
        '401':
          description: Unauthorized
        '409':
          description: Duplicate report within 3 days

  # Reference Data
  /api/reference-data/all:
    get:
      tags:
        - Reference
      summary: Get all reference data for dropdowns and filters
      description: Returns all reference data needed for car search filters. Labels are returned in the requested language (en or th).
      security: []
      parameters:
        - name: lang
          in: query
          description: Language preference for labels
          schema:
            type: string
            enum: [en, th]
            default: en
          example: "en"
      responses:
        '200':
          description: Reference data with localized labels
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/ReferenceData'
              example:
                success: true
                data:
                  bodyTypes:
                    - code: "PICKUP"
                      label: "Pickup"
                    - code: "SUV"
                      label: "SUV"
                    - code: "CITYCAR"
                      label: "City Car"
                  transmissions:
                    - code: "MANUAL"
                      label: "Manual"
                    - code: "AT"
                      label: "Automatic"
                  fuelTypes:
                    - code: "GASOLINE"
                      label: "Gasoline"
                    - code: "DIESEL"
                      label: "Diesel"
                    - code: "HYBRID"
                      label: "Hybrid"
                  drivetrains:
                    - code: "FWD"
                      label: "FWD"
                    - code: "AWD"
                      label: "AWD"
                    - code: "4WD"
                      label: "4WD"
                  colors:
                    - code: "WHITE"
                      label: "White"
                    - code: "BLACK"
                      label: "Black"
                    - code: "GRAY"
                      label: "Gray"
                  provinces:
                    - id: 10
                      label: "Chiang Mai"
                    - id: 19
                      label: "Bangkok"

  /api/reference-data/brands:
    get:
      tags:
        - Reference
      summary: Get all car brands
      description: Returns list of all car brands. Labels are returned in the requested language (en or th).
      security: []
      parameters:
        - name: lang
          in: query
          description: Language preference for labels
          schema:
            type: string
            enum: [en, th]
            default: en
          example: "en"
      responses:
        '200':
          description: List of brands
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                        label:
                          type: string

  /api/reference-data/models:
    get:
      tags:
        - Reference
      summary: Get all car models
      description: Returns list of all car models. Labels are returned in the requested language (en or th).
      security: []
      parameters:
        - name: lang
          in: query
          description: Language preference for labels
          schema:
            type: string
            enum: [en, th]
            default: en
          example: "en"
      responses:
        '200':
          description: List of models
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                        label:
                          type: string

  /api/reference-data/submodels:
    get:
      tags:
        - Reference
      summary: Get all car submodels
      description: Returns list of all car submodels. Labels are returned in the requested language (en or th).
      security: []
      parameters:
        - name: lang
          in: query
          description: Language preference for labels
          schema:
            type: string
            enum: [en, th]
            default: en
          example: "en"
      responses:
        '200':
          description: List of submodels
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                        label:
                          type: string

  # ============================================
  # ADMIN APIs
  # ============================================

  # Admin Authentication
  /admin/auth/signin:
    post:
      tags:
        - Admin
      summary: Admin sign in
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                  example: "admin"
                password:
                  type: string
                  example: "admin_password"
      responses:
        '200':
          description: Admin sign in successful
        '401':
          description: Invalid credentials

  /admin/auth/me:
    get:
      tags:
        - Admin
      summary: Get current admin information
      responses:
        '200':
          description: Admin information
        '401':
          description: Unauthorized

  /admin/auth/signout:
    post:
      tags:
        - Admin
      summary: Admin sign out
      responses:
        '200':
          description: Admin sign out successful

  /admin/auth/refresh:
    post:
      tags:
        - Admin
      summary: Refresh admin authentication token
      responses:
        '200':
          description: Token refreshed successfully
        '401':
          description: Unauthorized

  # Admin IP Whitelist Management
  /admin/ip-whitelist:
    get:
      tags:
        - Admin
      summary: View whitelisted IP addresses
      responses:
        '200':
          description: IP whitelist
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: integer
                    ip_address:
                      type: string
                    description:
                      type: string
                    created_at:
                      type: string
                      format: date-time

  /admin/ip-whitelist/add:
    post:
      tags:
        - Admin
      summary: Add IP address to whitelist
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - ip_address
              properties:
                ip_address:
                  type: string
                  example: "10.0.0.100/32"
                description:
                  type: string
                  example: "Office IP"
      responses:
        '200':
          description: IP address added successfully
        '400':
          description: Bad request

  /admin/ip-whitelist/check:
    post:
      tags:
        - Admin
      summary: Check IP deletion impact
      description: Checks if removing an IP address from the whitelist would affect any admin sessions.
      security:
        - AdminCookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id
              properties:
                id:
                  type: integer
                  description: IP whitelist entry ID to check
      responses:
        '200':
          description: Impact check result
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      willAffectSessions:
                        type: boolean
                        description: Whether removing this IP would affect active sessions
                      affectedSessionCount:
                        type: integer
                        description: Number of sessions that would be affected
        '400':
          description: Bad request
        '401':
          description: Unauthorized
        '404':
          description: IP address not found

  /admin/ip-whitelist/remove:
    delete:
      tags:
        - Admin
      summary: Remove IP address from whitelist
      parameters:
        - name: ip
          in: query
          required: true
          schema:
            type: string
          example: "10.0.0.100/32"
      responses:
        '200':
          description: IP address removed successfully
        '404':
          description: IP address not found

  # Admin Market Price Management
  /admin/market-price/data:
    get:
      tags:
        - Admin
      summary: Get all market prices from database
      description: Retrieves all market price entries from the database.
      security:
        - AdminCookieAuth: []
      responses:
        '200':
          description: List of market prices
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MarketPrice'
        '401':
          description: Unauthorized
        '500':
          description: Server error

  /admin/market-price/upload:
    post:
      tags:
        - Admin
      summary: Upload market price PDF and import to database
      description: Uploads a PDF file, extracts the data, and directly imports it to the database.
      security:
        - AdminCookieAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                marketPricePdf:
                  type: string
                  format: binary
                  description: The market price PDF file to upload.
      responses:
        '200':
          description: Import successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicResponse'
        '400':
          description: Bad request (e.g., no file, invalid file type)
        '401':
          description: Unauthorized
        '500':
          description: Extraction or import failed on the server

  # Admin Dashboard
  /admin/dashboard/stats:
    get:
      tags:
        - Admin
      summary: Get dashboard statistics
      description: Retrieves aggregated statistics for the main dashboard cards.
      security:
        - AdminCookieAuth: []
      responses:
        '200':
          description: Dashboard statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  totalUsers: 150
                  activeCars: 45
                  soldCars: 120
                  pendingReports: 8
                  totalBuyers: 100
                  totalSellers: 50
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /admin/dashboard/chart:
    get:
      tags:
        - Admin
      summary: Get user activity chart data
      description: Retrieves time-series data for user logins (Activity Overview).
      security:
        - AdminCookieAuth: []
      parameters:
        - in: query
          name: period
          schema:
            type: string
            example: "30d"
          description: Time period for the chart (e.g., 30d).
      responses:
        '200':
          description: Time-series data for user activity
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  - date: "2025-01-01"
                    value: 5
                  - date: "2025-01-02"
                    value: 8
                  - date: "2025-01-03"
                    value: 12
        '401':
          description: Unauthorized
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /admin/dashboard/top-brands:
    get:
      tags:
        - Admin
      summary: Get top 10 active brands data
      description: Retrieves the top 10 active car brands by listing count.
      security:
        - AdminCookieAuth: []
      responses:
        '200':
          description: List of top 10 brands and their counts
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  - brand: "TOYOTA"
                    count: 25
                  - brand: "HONDA"
                    count: 18
                  - brand: "ISUZU"
                    count: 15
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /admin/dashboard/recent-reports:
    get:
      tags:
        - Admin
      summary: Get recent pending reports
      description: Retrieves the 5 most recent 'pending' reports for the dashboard list.
      security:
        - AdminCookieAuth: []
      responses:
        '200':
          description: List of recent 'pending' reports
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  - id: 1
                    reportType: "car"
                    carId: 123
                    reporterId: 5
                    topic: "false_information"
                    status: "pending"
                    createdAt: "2025-01-15T10:30:00Z"
                  - id: 2
                    reportType: "seller"
                    sellerId: 10
                    reporterId: 7
                    topic: "fraud"
                    status: "pending"
                    createdAt: "2025-01-14T15:20:00Z"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  # Admin Reports Management
  /admin/reports:
    get:
      tags:
        - Admin
      summary: List reports
      description: Returns admin reports filtered by type and status.
      security:
        - AdminCookieAuth: []
      parameters:
        - in: query
          name: type
          schema:
            type: string
            enum: [user, car]
          description: Report target type. Maps to backend types 'seller' or 'car'.
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, reviewed, resolved, dismissed]
          description: Report status filter.
      responses:
        '200':
          description: Reports list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminReportsListResponse'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden (IP not whitelisted)
        '500':
          description: Server error

  /admin/reports/{id}/resolve:
    post:
      tags:
        - Admin
      summary: Resolve a report
      security:
        - AdminCookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Report resolved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
        '404':
          description: Car not found
        '500':
          description: Server error

  /admin/reports/{id}/dismiss:
    post:
      tags:
        - Admin
      summary: Dismiss a report
      security:
        - AdminCookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Report dismissed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
        '404':
          description: Report not found
        '500':
          description: Server error

  # Admin User Management
  /admin/users:
    get:
      tags:
        - Admin
      summary: Get all managed users
      description: Retrieves a list of all users (buyers/sellers) in the system for admin management.
      security:
        - CookieAuth: []
      responses:
        '200':
          description: A list of managed users
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminUsersListResponse'
        '401':
          description: Unauthorized
    post:
      tags:
        - Admin
      summary: Create a new managed user
      description: Creates a new user with standard credentials.
      security:
        - CookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateUserRequest'
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 201
                data:
                  id: 1
                  email: "user@example.com"
                  username: "user123"
                  name: "User Name"
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Username or email already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /admin/users/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: The ID of the user to manage
        schema:
          type: integer
    patch:
      tags:
        - Admin
      summary: Update a managed user
      description: Updates a user's details (name, username, email).
      security:
        - CookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateUserRequest'
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  id: 1
                  email: "user@example.com"
                  username: "user123"
                  name: "Updated Name"
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Username or email already taken
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      tags:
        - Admin
      summary: Delete a managed user
      description: Permanently deletes a user from the database.
      security:
        - CookieAuth: []
      responses:
        '200':
          description: User deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data: null
                message: "User deleted successfully"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: User not found
          content:
            application/json:
          schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Cannot delete user (e.g., has active listings)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /admin/users/{id}/ban:
    post:
      tags:
        - Admin
      summary: Ban a user (seller)
      security:
        - AdminCookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: User banned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
        '404':
          description: User not found
        '500':
          description: Server error

  # Admin Car Management
  /admin/cars:
    get:
      tags:
        - Admin
      summary: Get all managed cars
      description: Retrieves a list of all car listings in the system for admin management.
      security:
        - CookieAuth: []
      responses:
        '200':
          description: A list of managed cars
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminCarsListResponse'
        '401':
          description: Unauthorized
    post:
      tags:
        - Admin
      summary: Create a new managed car
      description: Creates a new car listing assigned to a specific seller ID.
      security:
        - CookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateCarRequest'
      responses:
        '201':
          description: Car created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                    success: true
                code: 201
                    data:
                  id: 1
                  seller_id: 1
                  brand_name: "TOYOTA"
                  model_name: "Camry"
                  status: "draft"
        '400':
          description: Invalid request body (e.g., missing sellerId)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
          schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Seller ID not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /admin/cars/{id}:
      parameters:
      - name: id
          in: path
          required: true
        description: The ID of the car to manage
          schema:
            type: integer
    patch:
      tags:
        - Admin
      summary: Update a managed car
      description: Updates details of a car listing (e.g., price, status, brand).
      security:
        - CookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateCarRequest'
      responses:
        '200':
          description: Car updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data:
                  id: 1
                  seller_id: 1
                  brand_name: "TOYOTA"
                  model_name: "Camry"
                  status: "active"
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
        content:
          application/json:
            schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      tags:
        - Admin
      summary: Delete a managed car
      description: Permanently deletes a car listing from the database.
      security:
        - CookieAuth: []
      responses:
        '200':
          description: Car deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
              example:
                success: true
                code: 200
                data: null
                message: "Car deleted successfully"
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
          schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Car not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /admin/cars/{id}/remove:
    post:
      tags:
        - Admin
      summary: Remove a car listing
      security:
        - AdminCookieAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Car removed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BasicResponse'
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
        '404':
          description: Car not found
        '500':
          description: Server error

components:
  securitySchemes:
    CookieAuth:
      type: apiKey
      in: cookie
      name: jwt
      description: JWT token stored in HTTP cookie
    AdminCookieAuth:
      type: apiKey
      in: cookie
      name: admin_jwt
      description: Admin JWT token stored in HTTP cookie

  schemas:
    AdminReport:
      type: object
      properties:
        id:
          type: integer
        type:
          type: string
          enum: [user, car]
        reportedById:
          type: integer
        reportedByName:
          type: string
        reportedByEmail:
          type: string
          format: email
        targetUserId:
          type: integer
          nullable: true
        targetUserName:
          type: string
          nullable: true
        targetCarId:
          type: integer
          nullable: true
        targetCarTitle:
          type: string
          nullable: true
        reason:
          type: string
        description:
          type: string
          nullable: true
        status:
          type: string
          enum: [pending, reviewed, resolved, dismissed]
        createdAt:
          type: string
          format: date-time
        resolvedAt:
          type: string
          format: date-time
          nullable: true
        resolvedBy:
          type: string
          nullable: true

    AdminReportsListResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/AdminReport'
        total:
          type: integer

    AdminErrorResponse:
      type: object
      description: Admin-specific error response (deprecated - use ErrorResponse instead)
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          description: Error message (deprecated - use message field in ErrorResponse)
        code:
          type: integer
    CarReportRequest:
      type: object
      required:
        - topic
        - description
      properties:
        topic:
          type: string
          description: Main reason for the report
          enum: [false_information, fraud, illegal_item, safety_issue, other, cond_mismatch, fake_details, car_not_exist, already_sold, edited_photo]
        subTopics:
          type: array
          description: Additional reasons or details
          items:
            type: string
        description:
          type: string
          description: Detailed explanation of the issue
    SellerReportRequest:
      type: object
      required:
        - topic
        - description
      properties:
        topic:
          type: string
          description: Main reason for the report
          enum: [harassment, fraud, scam, other, contact_unreachable, no_show, selling_fake_car, impersonation]
        subTopics:
          type: array
          description: Additional reasons or details
          items:
            type: string
        description:
          type: string
          description: Detailed explanation of the issue
    CreateReportResponse:
      type: object
      properties:
        success:
          type: boolean
        id:
          type: integer
          description: Created report ID
        message:
          type: string
    Car:
      type: object
      properties:
        id:
          type: integer
        seller_id:
          type: integer
        brand_name:
          type: string
        model_name:
          type: string
        submodel_name:
          type: string
        year:
          type: integer
        mileage:
          type: integer
        price:
          type: integer
        status:
          type: string
          enum: [draft, active, sold, deleted]
        created_at:
          type: string
          format: date-time

    CarCreate:
      type: object
      required:
        - model_name
        - mileage
        - price
      properties:
        model_name:
          type: string
        submodel_name:
          type: string
        mileage:
          type: integer
        price:
          type: integer
        description:
          type: string
        body_type_code:
          type: string
        transmission_code:
          type: string
        drivetrain_code:
          type: string

    CarUpdate:
      type: object
      properties:
        model_name:
          type: string
        submodel_name:
          type: string
        mileage:
          type: integer
        price:
          type: integer
        description:
          type: string
        status:
          type: string
          enum: [draft, active, sold, deleted]

    Seller:
      type: object
      properties:
        id:
          type: integer
        display_name:
          type: string
        about:
          type: string
        map_link:
          type: string

    SellerContact:
      type: object
      description: Seller contact information
      properties:
        id:
          type: integer
        sellerId:
          type: integer
        contactType:
          type: string
          example: "phone"
        value:
          type: string
          example: "0812345678"
        label:
          type: string
          nullable: true
          example: "Mobile"

    ProfileData:
      type: object
      description: Full user profile data including user, roles, and profiles
      properties:
        user:
          $ref: '#/components/schemas/UserPublic'
        roles:
          type: object
          properties:
            buyer:
              type: boolean
            seller:
              type: boolean
        profiles:
          type: object
          properties:
            buyerComplete:
              type: boolean
            sellerComplete:
              type: boolean
        buyer:
          $ref: '#/components/schemas/Buyer'
          nullable: true
        seller:
          $ref: '#/components/schemas/Seller'
          nullable: true
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/SellerContact'
          nullable: true

    ProfileResponse:
      type: object
      description: Response wrapper for profile data (matches backend utils.Response format)
      allOf:
        - $ref: '#/components/schemas/Response'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/ProfileData'

    SellerData:
      type: object
      description: Seller profile data with contacts and cars
      properties:
        seller:
          $ref: '#/components/schemas/Seller'
        contacts:
          type: array
          items:
            $ref: '#/components/schemas/SellerContact'
        cars:
          type: array
          items:
            $ref: '#/components/schemas/CarListItem'
          description: Lightweight car list items

    SellerResponse:
      type: object
      description: Response wrapper for seller data (matches backend utils.Response format)
      allOf:
        - $ref: '#/components/schemas/Response'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/SellerData'

    Buyer:
      type: object
      description: Buyer profile data
      properties:
        id:
          type: integer
        province:
          type: string
          nullable: true
        budgetMin:
          type: integer
          nullable: true
        budgetMax:
          type: integer
          nullable: true

    UserPublic:
      type: object
      description: Public user data (safe to return to client)
      properties:
        id:
          type: integer
        email:
          type: string
        username:
          type: string
        name:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    UserAuthData:
      type: object
      description: Authentication response data (used for signup, signin, refresh)
      properties:
        user:
          $ref: '#/components/schemas/UserPublic'
        token:
          type: string
          description: JWT token
        expiresAt:
          type: string
          format: date-time

    UserMeData:
      type: object
      description: Current user information with roles and profile completeness
      properties:
        user:
          $ref: '#/components/schemas/UserPublic'
        roles:
          type: object
          properties:
            buyer:
              type: boolean
            seller:
              type: boolean
        profiles:
          type: object
          properties:
            buyerComplete:
              type: boolean
            sellerComplete:
              type: boolean

    ReferenceData:
      type: object
      description: Reference data for dropdowns and filters (returned based on language preference)
      properties:
        bodyTypes:
          type: array
          description: Available body types
          items:
            type: object
            properties:
              code:
                type: string
                example: "SUV"
              label:
                type: string
                description: Localized label based on language parameter
                example: "SUV"
        transmissions:
          type: array
          description: Available transmission types
          items:
            type: object
            properties:
              code:
                type: string
                example: "AT"
              label:
                type: string
                description: Localized label based on language parameter
                example: "Automatic"
        fuelTypes:
          type: array
          description: Available fuel types
          items:
            type: object
            properties:
              code:
                type: string
                example: "GASOLINE"
              label:
                type: string
                description: Localized label based on language parameter
                example: "Gasoline"
        drivetrains:
          type: array
          description: Available drivetrain types
          items:
            type: object
            properties:
              code:
                type: string
                example: "AWD"
              label:
                type: string
                description: Localized label based on language parameter
                example: "AWD"
        colors:
          type: array
          description: Available colors
          items:
            type: object
            properties:
              code:
                type: string
                example: "WHITE"
              label:
                type: string
                description: Localized label based on language parameter
                example: "White"
        provinces:
          type: array
          description: Available provinces (71 provinces in Thailand)
          items:
            type: object
            properties:
              id:
                type: integer
                example: 10
              label:
                type: string
                description: Localized province name based on language parameter
                example: "Chiang Mai"

    CarDisplay:
      type: object
      description: Display-ready car object with translated labels
      properties:
        id:
          type: integer
        sellerId:
          type: integer
        year:
          type: integer
          nullable: true
        mileage:
          type: integer
          nullable: true
        price:
          type: integer
          nullable: true
        status:
          type: string
          enum: [draft, active, sold, deleted]
        createdAt:
          type: string
          format: date-time
        bodyType:
          type: string
          nullable: true
          description: Translated body type label
        transmission:
          type: string
          nullable: true
          description: Translated transmission label
        drivetrain:
          type: string
          nullable: true
          description: Translated drivetrain label
        fuelTypes:
          type: array
          items:
            type: string
          description: Array of translated fuel type labels
        colors:
          type: array
          items:
            type: string
          description: Array of translated color labels
        brandName:
          type: string
          nullable: true
        modelName:
          type: string
          nullable: true
        submodelName:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        chassisNumber:
          type: string
          nullable: true
        licensePlate:
          type: string
          description: Constructed license plate string
        prefix:
          type: string
          nullable: true
        number:
          type: string
          nullable: true
        province:
          type: string
          nullable: true
          description: Translated province name
        seats:
          type: integer
          nullable: true
        doors:
          type: integer
          nullable: true
        engineCc:
          type: integer
          nullable: true
        conditionRating:
          type: integer
          nullable: true
        isFlooded:
          type: boolean
        isHeavilyDamaged:
          type: boolean

    InspectionDisplay:
      type: object
      description: Display-ready inspection results with boolean fields (not nullable)
      properties:
        station:
          type: string
          example: "Test Station"
        overallPass:
          type: boolean
          example: true
        brakeResult:
          type: boolean
          example: true
        handbrakeResult:
          type: boolean
          example: true
        alignmentResult:
          type: boolean
          example: false
        noiseResult:
          type: boolean
          example: true
        emissionResult:
          type: boolean
          example: true
        hornResult:
          type: boolean
          example: true
        speedometerResult:
          type: boolean
          example: true
        highLowBeamResult:
          type: boolean
          example: true
        signalLightsResult:
          type: boolean
          example: true
        otherLightsResult:
          type: boolean
          example: true
        windshieldResult:
          type: boolean
          example: true
        steeringResult:
          type: boolean
          example: true
        wheelsTiresResult:
          type: boolean
          example: true
        fuelTankResult:
          type: boolean
          example: true
        chassisResult:
          type: boolean
          example: true
        bodyResult:
          type: boolean
          example: true
        doorsFloorResult:
          type: boolean
          example: true
        seatbeltResult:
          type: boolean
          example: true
        wiperResult:
          type: boolean
          example: true

    CarDetailResponse:
      type: object
      description: Full car detail response with car, images, inspection, and seller contacts
      properties:
        car:
          $ref: '#/components/schemas/CarDisplay'
        images:
          type: array
          items:
            $ref: '#/components/schemas/CarImageMetadata'
        inspection:
          $ref: '#/components/schemas/InspectionDisplay'
          nullable: true
        sellerContacts:
          type: array
          items:
            $ref: '#/components/schemas/SellerContact'
          description: Optional seller contact information

    InspectionResult:
      type: object
      description: Vehicle inspection results
      properties:
        id:
          type: integer
        carId:
          type: integer
        station:
          type: string
          nullable: true
        overallPass:
          type: boolean
          nullable: true
        brakeResult:
          type: boolean
          nullable: true
        handbrakeResult:
          type: boolean
          nullable: true
        alignmentResult:
          type: boolean
          nullable: true
        noiseResult:
          type: boolean
          nullable: true
        emissionResult:
          type: boolean
          nullable: true
        hornResult:
          type: boolean
          nullable: true
        speedometerResult:
          type: boolean
          nullable: true
        highLowBeamResult:
          type: boolean
          nullable: true
        signalLightsResult:
          type: boolean
          nullable: true
        otherLightsResult:
          type: boolean
          nullable: true
        windshieldResult:
          type: boolean
          nullable: true
        steeringResult:
          type: boolean
          nullable: true
        wheelsTiresResult:
          type: boolean
          nullable: true
        fuelTankResult:
          type: boolean
          nullable: true
        chassisResult:
          type: boolean
          nullable: true
        bodyResult:
          type: boolean
          nullable: true
        doorsFloorResult:
          type: boolean
          nullable: true
        seatbeltResult:
          type: boolean
          nullable: true
        wiperResult:
          type: boolean
          nullable: true
        createdAt:
          type: string
          format: date-time
          nullable: true
        updatedAt:
          type: string
          format: date-time
          nullable: true

    Pagination:
      type: object
      description: Pagination metadata for list endpoints
      properties:
        page:
          type: integer
          description: Current page number (1-indexed)
          example: 1
        limit:
          type: integer
          description: Number of items per page
          example: 20
        total:
          type: integer
          description: Total number of items across all pages
          example: 150
        pages:
          type: integer
          description: Total number of pages
          example: 8

    # --- Common Response Schemas ---
    # Unified response format used by all endpoints (matches backend utils.Response)
    # For success (statusCode < 400): {success: true, data: T, message?: string, code: int}
    # For error (statusCode >= 400): {success: false, message: string, code: int}
    Response:
      type: object
      description: |
        Unified response format used across all endpoints.
        - Success responses (statusCode < 400): include 'data' field
        - Error responses (statusCode >= 400): exclude 'data' field, only include 'message'
      required:
        - success
        - code
      properties:
        success:
          type: boolean
          description: true for success, false for error
          example: true
        code:
          type: integer
          description: HTTP status code
          example: 200
        data:
          type: object
          description: Response data (only present for success responses, statusCode < 400)
          nullable: true
        message:
          type: string
          description: Optional message for success, required message for errors
          nullable: true
          example: "Operation completed successfully"

    # Alias for backward compatibility and clarity
    ErrorResponse:
      allOf:
        - $ref: '#/components/schemas/Response'
        - type: object
          description: Error response (statusCode >= 400) - data field is omitted
          properties:
            success:
              example: false
            message:
              description: Error message (required for errors)
              example: "Invalid input provided"
            code:
              example: 400

    SuccessResponse:
      allOf:
        - $ref: '#/components/schemas/Response'
        - type: object
          description: Success response (statusCode < 400) - includes data field
          properties:
            success:
              example: true
            data:
              description: Response data
            code:
              example: 200

    BasicResponse:
      type: object
      description: Basic response with success flag and optional message (simplified version of Response)
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          nullable: true
          example: "Operation completed successfully"

    CarImageMetadata:
      type: object
      description: Image metadata without binary data
      properties:
        id:
          type: integer
        carId:
          type: integer
        imageType:
          type: string
          description: MIME type (e.g., image/jpeg)
        imageSize:
          type: integer
        displayOrder:
          type: integer
        uploadedAt:
          type: string
          format: date-time

    CarListItem:
      type: object
      description: Lightweight car listing item with translated labels for display
      properties:
        id:
          type: integer
        sellerId:
          type: integer
        status:
          type: string
          enum: [draft, active, sold, deleted]
        brandName:
          type: string
          nullable: true
        modelName:
          type: string
          nullable: true
        submodelName:
          type: string
          nullable: true
        year:
          type: integer
          nullable: true
        price:
          type: integer
          nullable: true
        mileage:
          type: integer
          nullable: true
        bodyType:
          type: string
          nullable: true
          description: Display label (e.g., "Pickup")
        transmission:
          type: string
          nullable: true
          description: Display label (e.g., "Manual")
        drivetrain:
          type: string
          nullable: true
          description: Display label (e.g., "FWD")
        fuelTypes:
          type: array
          items:
          type: string
          description: Display labels (e.g., ["Gasoline", "LPG"])
        colors:
          type: array
          items:
          type: string
          description: Display labels (e.g., ["White", "Gray"])
        conditionRating:
          type: integer
          nullable: true
        thumbnailUrl:
          type: string
          nullable: true
          description: Image URL for thumbnail (e.g., "/api/cars/images/123")

    CarListItemListResponse:
      type: object
      description: Response containing a list of CarListItem objects
      properties:
        success:
          type: boolean
        data:
          type: array
          items:
            $ref: '#/components/schemas/CarListItem'
        message:
          type: string
          nullable: true

    # --- NEW: Schemas for Market Price ---
    MarketPrice:
      type: object
      description: Represents a single market price entry
      properties:
        brand:
          type: string
          example: "TOYOTA"
        model_trim:
          type: string
          example: "VIOS 1.5 E"
        year_start:
          type: integer
          example: 2018
        year_end:
          type: integer
          example: 2020
        price_min_thb:
          type: integer
          format: int64
          example: 350000
        price_max_thb:
          type: integer
          format: int64
          example: 400000
        created_at:
          type: string
          format: date-time
          description: Set by the backend upon extraction/commit
        updated_at:
          type: string
          format: date-time
          description: Set by the backend upon extraction/commit

    CommitResponse:
      type: object
      description: Response after committing market prices to the database
      properties:
        message:
          type: string
          example: "Market prices committed successfully."
        inserted_count:
          type: integer
          example: 150
        updated_count:
          type: integer
          example: 10

    # --- NEW: Schemas for Admin User Management ---
    UserPublic:
      type: object
      description: Publicly safe user information
      properties:
        id:
          type: integer
        email:
          type: string
        username:
          type: string
        name:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    
    AdminManagedUser:
      type: object
      description: User data for the admin management table
      properties:
        id:
          type: integer
        type:
          type: string
          example: "user"
        email:
          type: string
          nullable: true
        updated_at:
          type: string
          format: date-time
        username:
          type: string
        name:
          type: string
        created_at:
          type: string
          format: date-time
        role:
          type: string
          example: "Seller"

    AdminUsersListResponse:
      type: object
      description: Response wrapper for admin users list (matches backend utils.Response format)
      required:
        - success
        - code
      properties:
        success:
          type: boolean
          example: true
        code:
          type: integer
          example: 200
        data:
          type: object
          description: Response data containing users list and total count
          properties:
            users:
          type: array
          items:
            $ref: '#/components/schemas/AdminManagedUser'
        total:
          type: integer
          example: 1
        message:
          type: string
          nullable: true
    
    AdminCreateUserRequest:
      type: object
      required: [name, username, email, password]
      properties:
        name:
          type: string
          example: "New User"
        username:
          type: string
          example: "newuser123"
        email:
          type: string
          format: email
          example: "new@user.com"
        password:
          type: string
          format: password
          example: "password123"

    AdminUpdateUserRequest:
      type: object
      properties:
        name:
          type: string
          nullable: true
          example: "Updated Name"
        username:
          type: string
          nullable: true
          example: "updateduser"
        email:
          type: string
          format: email
          nullable: true
          example: "updated@user.com"

    # --- NEW: Schemas for Admin Car Management ---
    AdminManagedCar:
      type: object
      description: Car data for the admin management table
      properties:
        id:
          type: integer
        brandName:
          type: string
          nullable: true
          example: "TOYOTA"
        modelName:
          type: string
          nullable: true
          example: "HILUX VIGO"
        submodelName:
          type: string
          nullable: true
          example: "2.5 E"
        year:
          type: integer
          nullable: true
          example: 2014
        status:
          type: string
          example: "active"
        listedDate:
          type: string
          format: date-time
          description: "Corresponds to created_at"
        soldBy:
          type: string
          nullable: true
          description: "Name of the seller (from users table)"
          example: "Demo Seller"
        price:
          type: integer
          nullable: true
          example: 350000
        mileage:
          type: integer
          nullable: true
          example: 150000
    
    AdminCarsListResponse:
      type: object
      description: Response wrapper for admin cars list (matches backend utils.Response format)
      required:
        - success
        - code
      properties:
        success:
          type: boolean
          example: true
        code:
          type: integer
          example: 200
        data:
          type: object
          description: Response data containing cars list and total count
          properties:
            cars:
          type: array
          items:
            $ref: '#/components/schemas/AdminManagedCar'
        total:
          type: integer
          example: 10
        message:
          type: string
          nullable: true

    AdminCreateCarRequest:
      type: object
      required: [sellerId]
      properties:
        sellerId:
          type: integer
          description: "The ID of the user (seller) who owns this car"
          example: 1
        brandName:
          type: string
          nullable: true
        modelName:
          type: string
          nullable: true
        submodelName:
          type: string
          nullable: true
        year:
          type: integer
          nullable: true
        price:
          type: integer
          nullable: true
        mileage:
          type: integer
          nullable: true
        status:
          type: string
          nullable: true
          enum: [draft, active, sold, deleted]
          default: "draft"

    AdminUpdateCarRequest:
      type: object
      properties:
        brandName:
          type: string
          nullable: true
        modelName:
          type: string
          nullable: true
        submodelName:
          type: string
          nullable: true
        year:
          type: integer
          nullable: true
        price:
          type: integer
          nullable: true
        mileage:
          type: integer
          nullable: true
        status:
          type: string
          nullable: true
          enum: [draft, active, sold, deleted]
          
  # --- NEW: Schemas for Admin Dashboard ---
    DashboardStats:
      type: object
      description: Aggregated statistics for the admin dashboard cards
      properties:
        totalUsers:
          type: integer
        activeCars:
          type: integer
        soldCars:
          type: integer
        pendingReports:
          type: integer
        totalBuyers:
          type: integer
        totalSellers:
          type: integer
    
    ChartDataPoint:
      type: object
      description: A single data point for a time-series chart
      properties:
        date:
          type: string
          example: "2025-11-16"
        value:
          type: integer
          example: 5
          
    BrandDataPoint:
      type: object
      description: A single data point for the top brands chart
      properties:
        brand:
          type: string
          example: "TOYOTA"
        count:
          type: integer
          example: 7

    Report:
      type: object
      description: Represents a single report (matches models.Report)
      properties:
        id:
          type: integer
        reportType:
          type: string
          enum: [car, seller]
        carId:
          type: integer
          nullable: true
        sellerId:
          type: integer
          nullable: true
        reporterId:
          type: integer
        topic:
          type: string
        subTopics:
          type: object
          description: "A JSON raw message, usually an array of strings"
          example: ["Price", "Mileage"]
        description:
          type: string
        status:
          type: string
          enum: [pending, reviewed, resolved, dismissed]
        createdAt:
          type: string
          format: date-time
        reviewedAt:
          type: string
          format: date-time
          nullable: true
        reviewedByAdminId:
          type: integer
          nullable: true
        adminNotes:
          type: string
          nullable: true
